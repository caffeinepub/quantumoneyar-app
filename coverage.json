{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-27T00:55:26.636Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 9,
    "implemented": 8,
    "items": [
      {
        "id": "REQ-28",
        "summary": "Rebuild the backend actor (backend/main.mo) to expose all endpoints required by QuantumoneyAR.app: getPlayerState (XP, lockedQMY, unlockedQMY, capturedMonsters, lockedCoins), claimWelcomeBonus (1000 QMY: 100 unlocked + 900 locked in 9×100 QMY monthly vesting + 100 XP, idempotent per Principal), lockCoin (spawnId → awards +10 XP), unlockCoin (spawnId → deducts -15 XP), captureMonster (spawnId → awards +20 XP), getSpawnList (returns canonical list of coin and monster spawns with IDs, coordinates, type, and attributes), getUserProfile (displayName, photoBlob), setDisplayName, setProfilePhoto, and getVestingSchedule. All mutations must be authenticated via the caller Principal. The Carteira A canisters are: Logic ckmsk-taaaa-aaaah-atfca-cai, Ledger 5o54h-giaaa-aaaad-aentq-cai, Governance nemlr-6aaaa-aaaan-q32la-cai, Gold Paper whu4t-kiaaa-aaaah-qsc5q-cai, Frontend crjop-jyaaa-aaaah-atfaq-cai. Controller Principal: xruv6-6qf3w-d7qu3-tjyif-dhee6-ownvo-gwhmj-bsoxs-g5sp3-vszel-zqe.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-29",
        "summary": "Rebuild GameStateContext (frontend/src/contexts/GameStateContext.tsx) to fetch all player data exclusively from the backend canister via the authenticated actor. On mount (and on window focus), call getPlayerState and getVestingSchedule. Expose xp, lockedQMY, unlockedQMY, capturedMonsters, lockedCoins, vestingSchedule, and refetch. Remove all localStorage-only derivations for these values. The context must also expose a triggerWelcomeBonus function that calls claimWelcomeBonus on the canister and refetches state.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/contexts/GameStateContext.tsx"
        ],
        "matchedFiles": [
          "frontend/src/contexts/GameStateContext.tsx"
        ]
      },
      {
        "id": "REQ-30",
        "summary": "Rebuild useArActions.ts (frontend/src/hooks/useArActions.ts) so that useLockCoin, useUnlockCoin, and useCaptureMonster are React Query mutations that call the real backend actor endpoints lockCoin, unlockCoin, and captureMonster respectively, passing the spawnId. On success, each mutation must invalidate the playerState query so GameStateContext refreshes from the canister, and must update arInteractionsStore and mockGameplayState (as fallback cache). Remove any stub or simulation logic.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/hooks/useArActions.ts"
        ],
        "matchedFiles": [
          "frontend/src/hooks/useArActions.ts"
        ]
      },
      {
        "id": "REQ-31",
        "summary": "Rebuild CameraARActionBar (frontend/src/components/sections/CameraAR/CameraARActionBar.tsx) to be fully playable: (1) Show a 'Lock QMY' button when the nearest visible AR object is a coin and it is not yet locked — on click, call useLockCoin with that spawn's ID and show a loading spinner during the mutation. (2) Show an 'Unlock QMY' button when the nearest visible coin is locked — on click, call useUnlockCoin with that spawn's ID and show a loading spinner. (3) Show a 'Rescue Monster' button when the nearest visible AR object is a monster and it is not yet captured — on click, call useCaptureMonster, then display SpawnCollectFX, and add a 'creature-capture' event via useGameplayHistory. (4) Show an XP change toast (+10, -15, or +20) after each successful mutation. Lock and Unlock actions must only be available on the AR page.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/sections/CameraAR/CameraARActionBar.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/sections/CameraAR/CameraARActionBar.tsx"
        ]
      },
      {
        "id": "REQ-32",
        "summary": "Rebuild the spawn data layer: fetch the canonical spawn list from the canister via getSpawnList on app load (via a React Query hook useSpawnList). Store the result in a context or module-level cache accessible to the AR overlay, Leaflet map, and action bar. The mockSpawns.ts list in frontend/src/lib/mockSpawns.ts must be used only as a fallback when the canister call fails, and must be clearly labeled with a comment '// FALLBACK ONLY — used when canister is unreachable'. Real canister spawn data must always take precedence.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/hooks/useSpawnList.ts",
          "frontend/src/lib/mockSpawns.ts",
          "frontend/src/components/sections/CameraAR/CameraARPage.tsx",
          "frontend/src/components/sections/MapMundoLeaflet.tsx"
        ],
        "matchedFiles": [
          "frontend/src/hooks/useSpawnList.ts",
          "frontend/src/lib/mockSpawns.ts",
          "frontend/src/components/sections/CameraAR/CameraARPage.tsx",
          "frontend/src/components/sections/MapMundoLeaflet.tsx"
        ]
      },
      {
        "id": "REQ-33",
        "summary": "Rebuild the HUD page (frontend/src/components/sections/HUD.tsx): remove all floating/drifting animated coin graphics. Replace them with static realistic QMY coin images displayed as decorative elements (e.g., a row or cluster of 3D-style golden QMY coin images). The animated space background (stars, planets, comets) from HomeSpaceBackground must remain active. Display the player's real XP, locked QMY, and unlocked QMY from GameStateContext. Show a 'Go to Quantumoney.app' button that opens https://quantumoney.app in a new tab. On first login, automatically trigger claimWelcomeBonus and show the WelcomeBonusModal.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/sections/HUD.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/sections/HUD.tsx"
        ]
      },
      {
        "id": "REQ-34",
        "summary": "Rebuild the Profile page (frontend/src/components/sections/Profile.tsx) to read all data exclusively from the canister: displayName via getUserProfile, XP, lockedQMY, unlockedQMY, capturedMonsters count, and vestingSchedule from GameStateContext. The display name must be editable inline and saved via setDisplayName canister call. Profile photo upload must call setProfilePhoto on the canister and display the stored photo; fall back to a default avatar if none set. Remove all localStorage-only derivations for these values.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/sections/Profile.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/sections/Profile.tsx"
        ]
      },
      {
        "id": "REQ-35",
        "summary": "Rebuild the Leaflet map integration so that spawn markers in both /public/map/map.js and the MapMundoLeaflet React component (frontend/src/components/sections/MapMundoLeaflet.tsx) reflect the real-time lock and capture states from the canister (via arInteractionsStore which is synced from canister PlayerState). Coins that are locked must display a locked visual marker; monsters that are captured must display a captured visual marker. The map must receive updated state via postMessage whenever arInteractionsStore changes.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/sections/MapMundoLeaflet.tsx",
          "frontend/public/map/map.js"
        ],
        "matchedFiles": [
          "frontend/src/components/sections/MapMundoLeaflet.tsx",
          "frontend/public/map/map.js"
        ]
      },
      {
        "id": "REQ-36",
        "summary": "Generate a realistic 3D-style golden QMY coin image to be used as a static decorative asset on the HUD page. The coin should have a metallic gold surface with 'QMY' text engraved on the face, a ridged edge, and subtle light reflections to look like a physical cryptocurrency coin.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/sections/HUD.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/sections/HUD.tsx"
        ]
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/public/assets/generated/qmy-coin-3d.dim_256x256.png",
    "frontend/public/map/map.js",
    "frontend/src/App.tsx",
    "frontend/src/backend.d.ts",
    "frontend/src/backend.ts",
    "frontend/src/components/WelcomeBonusModal.tsx",
    "frontend/src/components/profile/GameplayHistoryMiniMap.tsx",
    "frontend/src/components/sections/CameraAR/CameraARActionBar.tsx",
    "frontend/src/components/sections/CameraAR/CameraARPage.tsx",
    "frontend/src/components/sections/CameraAR/OverlayLayer.tsx",
    "frontend/src/components/sections/CameraAR/arMath.ts",
    "frontend/src/components/sections/CameraAR/sprites.ts",
    "frontend/src/components/sections/CameraAR/useArVisibility.ts",
    "frontend/src/components/sections/HUD.tsx",
    "frontend/src/components/sections/HomeSpaceBackground.tsx",
    "frontend/src/components/sections/MapMundoLeaflet.tsx",
    "frontend/src/components/sections/Profile.tsx",
    "frontend/src/components/sections/StaticWorldMap.tsx",
    "frontend/src/contexts/GameStateContext.tsx",
    "frontend/src/declarations/backend.did.d.ts",
    "frontend/src/declarations/backend.did.js",
    "frontend/src/gameplay/fx/SpawnCollectFX.tsx",
    "frontend/src/gameplay/history/useGameplayHistory.ts",
    "frontend/src/hooks/useArActions.ts",
    "frontend/src/hooks/usePlayerState.ts",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/hooks/useSpawnList.ts",
    "frontend/src/lib/arInteractionsStore.ts",
    "frontend/src/lib/mockSpawns.ts",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}